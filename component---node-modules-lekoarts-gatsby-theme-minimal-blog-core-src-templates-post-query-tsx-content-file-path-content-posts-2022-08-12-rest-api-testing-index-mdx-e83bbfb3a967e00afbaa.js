"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[467],{454:function(e,t,n){function l(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{A:function(){return l}})},1173:function(e,t,n){n.d(t,{p:function(){return h},A:function(){return d}});var l=n(454),a=n(6540),r=n(557),i=n(6835),o=n(3328),s=n(7715),c=n(7169);var m=e=>{let{post:t}=e;return null};const u=["16px","8px","4px"].map(e=>"rgba(0, 0, 0, 0.1) 0px "+e+" "+e+" 0px");var p=e=>{let{data:{post:t},children:n}=e;return(0,r.Y)(o.A,null,(0,r.Y)(i.DZ,{as:"h1",variant:"styles.h1"},t.title),(0,r.Y)("p",{sx:{color:"secondary",mt:3,a:{color:"secondary"},fontSize:[1,1,2]}},(0,r.Y)("time",null,t.date),t.tags&&(0,r.Y)(a.Fragment,null," — ",(0,r.Y)(s.A,{tags:t.tags})),t.timeToRead&&" — ",t.timeToRead&&(0,r.Y)("span",null,t.timeToRead," min read")),(0,r.Y)("section",{sx:{my:5,".gatsby-resp-image-wrapper":{my:[4,4,5],borderRadius:"4px",boxShadow:u.join(", "),".gatsby-resp-image-image":{borderRadius:"4px"}},variant:"layout.content"}},n),(0,r.Y)(m,{post:t}))};const h=e=>{var t,n,l;let{data:{post:a}}=e;return(0,r.Y)(c.A,{title:a.title,description:a.description?a.description:a.excerpt,image:a.banner?null===(t=a.banner)||void 0===t||null===(n=t.childImageSharp)||void 0===n||null===(l=n.resize)||void 0===l?void 0:l.src:void 0,pathname:a.slug,canonicalUrl:a.canonicalUrl})};function d(e){let t=Object.assign({},((0,l.A)(e),e));return a.createElement(p,t)}},6276:function(e,t,n){n.r(t),n.d(t,{Head:function(){return o.p},default:function(){return s}});var l=n(6540),a=n(8453);function r(e){const t=Object.assign({h3:"h3",h4:"h4",p:"p",a:"a",pre:"pre",code:"code",ol:"ol",li:"li",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ul:"ul",span:"span"},(0,a.RP)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.h3,null,"Introduction and theory"),"\n",l.createElement(t.h4,null,"What is REST Api and how does it differ from GraphQL"),"\n",l.createElement(t.p,null,"Roy Fielding defined REST as architectural style for distributed hypermedia systems. It's described ",l.createElement(t.a,{href:"https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm"},"here")," if you want to dive in.\nFor this blog post consider REST as set of contraints that tells you how to create API."),"\n",l.createElement(t.p,null,"What's an API?\nIt's an interface (a strict set of rules) that will allow you to communicate and use existing code in different applications (it might be even the same app)."),"\n",l.createElement(t.p,null,"What's in that case REST API?\nIt's an API that is compliant with REST rules."),"\n",l.createElement(t.p,null,"Which protocol does REST uses?\nMostly HTTP."),"\n",l.createElement(t.p,null,"What's GraphQL?\nAll the answers in REST will return you whole resource. For example if you want to get user info you'll get something like:"),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-json"},"{\n    'name': 'John',\n    'surname': 'Kowalsky',\n    'email': 'j.kowalsky@penguins-from-madagascar.com',\n    'age': '5'\n}\n")),"\n",l.createElement(t.p,null,"And that goes on and on. Think about resources that will have 50 fields (yeah, it happens sometimes)."),"\n",l.createElement(t.p,null,"GraphQL solves that, instead of asking for the whole resource, you can ask just for email, or age and email. Then you'll get only the fields that you are interested in:"),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-json"},"{\n    'email': 'j.kowalsky@penguins-from-madagascar.com',\n    'age': '5'\n}\n")),"\n",l.createElement(t.p,null,"This saves time, traffic and resources that you have to pay for the servers.\nMore info about GraphQL ",l.createElement(t.a,{href:"https://graphql.org/"},"here")),"\n",l.createElement(t.h4,null,"What are REST rules (in shortcut)"),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"Client-server architecture"),"\n"),"\n",l.createElement(t.p,null,"Client does not know anything about server besides endpoints and payloads that he needs to send."),"\n",l.createElement(t.ol,{start:"2"},"\n",l.createElement(t.li,null,"Stateless"),"\n"),"\n",l.createElement(t.p,null,"No sessions, no remembering what was sent in previous requests. Only JWT Tokens (or something similar) that needs to be sent with every request."),"\n",l.createElement(t.ol,{start:"3"},"\n",l.createElement(t.li,null,"Layers"),"\n"),"\n",l.createElement(t.p,null,"We know only about next layer (if it's more than one, we only know about the next one we need to communicate with)"),"\n",l.createElement(t.ol,{start:"4"},"\n",l.createElement(t.li,null,"Cache"),"\n"),"\n",l.createElement(t.p,null,"Try to cache images on the client side. Don't DDOS yourself."),"\n",l.createElement(t.ol,{start:"5"},"\n",l.createElement(t.li,null,"Uniform Interface"),"\n"),"\n",l.createElement(t.p,null,"Pick one (I suggest JSON) and stay with it. And create unique URI for separate resources."),"\n",l.createElement(t.h4,null,"What is HTTP Protocol"),"\n",l.createElement(t.p,null,"Full RFC for HTTP Protocol is ",l.createElement(t.a,{href:"https://www.ietf.org/rfc/rfc2616.txt"},"here"),", try to get familiar with it on the fly.\nREST API should be compliant with HTTP codes below (GraphQL might on the other side sent you response: 200 OK and error in json payload)"),"\n",l.createElement(t.table,null,l.createElement(t.thead,null,l.createElement(t.tr,null,l.createElement(t.th,null,"HTTP Request"),l.createElement(t.th,null,"CRUD"),l.createElement(t.th,null,"Resource Collection"),l.createElement(t.th,{align:"right"},"Single resource"))),l.createElement(t.tbody,null,l.createElement(t.tr,null,l.createElement(t.td,null,"POST"),l.createElement(t.td,null,"Create"),l.createElement(t.td,null,"201 (Created)"),l.createElement(t.td,{align:"right"},"404 (Not Found)")),l.createElement(t.tr,null,l.createElement(t.td,null,"GET"),l.createElement(t.td,null,"Read"),l.createElement(t.td,null,"200 (Ok)"),l.createElement(t.td,{align:"right"},"200 (Ok)")),l.createElement(t.tr,null,l.createElement(t.td,null,"PUT"),l.createElement(t.td,null,"Update"),l.createElement(t.td,null,"405 (Method Not Allowed)"),l.createElement(t.td,{align:"right"},"200 (Ok)")),l.createElement(t.tr,null,l.createElement(t.td,null,"PATCH"),l.createElement(t.td,null,"Update"),l.createElement(t.td,null,"405 (Method Not Allowed)"),l.createElement(t.td,{align:"right"},"200 (Ok)")),l.createElement(t.tr,null,l.createElement(t.td,null,"DELETE"),l.createElement(t.td,null,"Delete"),l.createElement(t.td,null,"405 (Method Not Allowed)"),l.createElement(t.td,{align:"right"},"200 (Ok)")))),"\n",l.createElement(t.h3,null,"Actual Testing tools"),"\n",l.createElement(t.h4,null,"Postman"),"\n",l.createElement(t.p,null,"The oldest and most used now tool"),"\n",l.createElement(t.p,null,"Pros:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"(mostly) free for normal usage, paid features include team support"),"\n",l.createElement(t.li,null,"low learning curve"),"\n",l.createElement(t.li,null,"you can automate tests with a bit knowledge of JavaScript"),"\n",l.createElement(t.li,null,"you can mock API responses"),"\n",l.createElement(t.li,null,"support multiple environments"),"\n",l.createElement(t.li,null,"built in runner and reporting"),"\n",l.createElement(t.li,null,"works on all OS"),"\n",l.createElement(t.li,null,"built in Open API support"),"\n",l.createElement(t.li,null,"exports stuff that can be run with newman in CI"),"\n"),"\n",l.createElement(t.p,null,"Cons:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"does not support other languages than JS"),"\n",l.createElement(t.li,null,"no support for js syntax"),"\n",l.createElement(t.li,null,"a bit hard to evolve into full testing framework (that will check database), this require a lot of javascript knowledge"),"\n",l.createElement(t.li,null,"hard to keep the tests under version control (reviewing them is nightmare)"),"\n"),"\n",l.createElement(t.h4,null,"Newman (+npm)"),"\n",l.createElement(t.p,null,"Postman CLI that runs on the top of npm. Nice extensible tool that will generate reports that your CI/CD tool understands."),"\n",l.createElement(t.h4,null,"VS Code + Rest Client"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 826px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 94.16666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACiUlEQVR42o1T204TURRt4h/ooy9+gP/gu7/kgw+oiSQGDDwoWEqVgBol4uUBBTEoEtSSNgVKsakotGU6PWfmzJzLXDuumaGtQSGunJzsuay99tl7nUwURW9/0etf9repjAJf13XGLEqJbduccylldDoyywfG+Qdr58Y/XJ779oPaWrNxpGnNZrNDiGEYzLIiTwVGy7eI67onybe+7l/MrV95Ubowuba034lcaTJLCGFZlslM6Iee23V46Ejf90+Sd6i49HAjM/r+6pty3XBGPrYOdDOKwiAMuz2cWjb+2yPWy3q7IxzfD35SqVwPhCAIzqAdkzkXlHS6ga+kjFtkmVIKpRSlNO1W93RkhOAmiw9HDcPzfWiFXVQc15wG/ZUcIF4DZYsxorcxHL155Lle9B8YKK+sF67NrA4t7dxY3RxaLN9cKIzPTtzNjo1u5LKb09nX+cnau5lPz6efTiy8WnhSvL+ozaGmY+XCZmFi6vG95emx3TtTK3P5Z/OTxdv5z+OP5mdz5ZHs9nD2+2iuMjJVGt5tlZkyTI8MysbopeCSc1c6jhBJLIWNSQvFVRzYQkmHI+DcZjYeB2TYQNc7hBKseDxJS3rzTdtzvPePPCB7ngc+nEgIgasQtNttxphIgGlhfJgcIhFrc+x2gpgMNdM0a7VaqVQqFosI6vV6tVqtVCpbW1vVvb3G4SFHLsZgBGRxHEcmiMmoDsmg1mq1cB80TYM9UAVyu44DIV+pQClfiOgvw2XCMIQymEcJGo1GmgUpwMetUrCQYcB8/7AnlPETpNoJ9ARgxt3GUYVA9tQZfYf094FyowfI2n/grFuFb+hhpwfI4tgoAXtaBfiYAvqf7gDeQE8p9Rs/AB7IdsSLAAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Rest Client VS Code extension"\n        title=""\n        src="/static/fce47fd2cae1b62b7b9e07bd710d14e3/5a031/rest-client.png"\n        srcset="/static/fce47fd2cae1b62b7b9e07bd710d14e3/5243c/rest-client.png 240w,\n/static/fce47fd2cae1b62b7b9e07bd710d14e3/ab158/rest-client.png 480w,\n/static/fce47fd2cae1b62b7b9e07bd710d14e3/5a031/rest-client.png 826w"\n        sizes="(max-width: 826px) 100vw, 826px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",l.createElement(t.h4,null,"Rest Sharp / Rest Assured"),"\n",l.createElement(t.p,null,"If you want to work with libraries to test REST API programatically, for C# use Rest Sharp, for Java Rest Assured.\nThey have the most support from the community and are mature solutions."),"\n",l.createElement(t.h3,null,"Framework example"),"\n",l.createElement(t.h4,null,"GraphQL testing framework"),"\n",l.createElement(t.p,null,"I haven't found GraphQL testing framework yet, but it's so similar to REST that RestAssured/RestSharp with some additional helper classes is sufficient.\nI've created simple GraphQL testing framework in this ",l.createElement(t.a,{href:"https://github.com/misiekofski/graphql-testing-framework"},"repo")),"\n",l.createElement(t.p,null,"The main functionality is to create a proper query builder. Reverse engineering from Postman told me to solve it this way."),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-java"},'public class GraphqlParser {\n    // prevent instantiating GraphQl\n    private GraphqlParser() {\n    }\n\n    public static String parseFile(String fileName) throws JsonProcessingException {\n        return parseFileWithParams(fileName, null);\n    }\n\n    public static <K, V> String parseFileWithParams(String fileName, Map<K, V> params) throws JsonProcessingException {\n        String query;\n        ObjectMapper mapper = new ObjectMapper();\n\n        Path filePath = Paths.get("src", "test", "resources", fileName);\n        try {\n            query = Files.readString(filePath);\n        } catch (Exception e) {\n            System.out.println("GraphQL file not found by name:" + fileName);\n            return null;\n        }\n\n        Map<String, String> queryMap = new HashMap<>();\n        queryMap.put("query", query);\n\n       if (params != null) {\n            queryMap.put("variables", mapper.writeValueAsString(params));\n        }\n\n        return mapper.writeValueAsString(queryMap);\n    }\n}\n')))}var i=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?l.createElement(t,e,l.createElement(r,e)):r(e)},o=n(1173);function s(e){return l.createElement(o.A,e,l.createElement(i,e))}o.A},7169:function(e,t,n){var l=n(6540),a=n(4794),r=n(7533);t.A=e=>{let{title:t="",description:n="",pathname:i="",image:o="",children:s=null,canonicalUrl:c=""}=e;const m=(0,r.A)(),{siteTitle:u,siteTitleAlt:p,siteUrl:h,siteDescription:d,siteImage:g,author:E,siteLanguage:f}=m,y={title:t?t+" | "+u:p,description:n||d,url:""+h+(i||""),image:""+h+(o||g)};return l.createElement(l.Fragment,null,l.createElement("html",{lang:f}),l.createElement("title",null,y.title),l.createElement("meta",{name:"description",content:y.description}),l.createElement("meta",{name:"image",content:y.image}),l.createElement("meta",{property:"og:title",content:y.title}),l.createElement("meta",{property:"og:url",content:y.url}),l.createElement("meta",{property:"og:description",content:y.description}),l.createElement("meta",{property:"og:image",content:y.image}),l.createElement("meta",{property:"og:type",content:"website"}),l.createElement("meta",{property:"og:image:alt",content:y.description}),l.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),l.createElement("meta",{name:"twitter:title",content:y.title}),l.createElement("meta",{name:"twitter:url",content:y.url}),l.createElement("meta",{name:"twitter:description",content:y.description}),l.createElement("meta",{name:"twitter:image",content:y.image}),l.createElement("meta",{name:"twitter:image:alt",content:y.description}),l.createElement("meta",{name:"twitter:creator",content:E}),l.createElement("meta",{name:"gatsby-theme",content:"@lekoarts/gatsby-theme-minimal-blog"}),l.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:(0,a.withPrefix)("/favicon-32x32.png")}),l.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:(0,a.withPrefix)("/favicon-16x16.png")}),l.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:(0,a.withPrefix)("/apple-touch-icon.png")}),c?l.createElement("link",{rel:"canonical",href:c}):null,s)}},7715:function(e,t,n){var l=n(557),a=n(6540),r=n(4794),i=n(3601),o=n(2174);t.A=e=>{let{tags:t}=e;const{tagsPath:n,basePath:s}=(0,i.A)();return(0,l.Y)(a.Fragment,null,t.map((e,t)=>(0,l.Y)(a.Fragment,{key:e.slug},!!t&&", ",(0,l.Y)(r.Link,{sx:e=>{var t;return Object.assign({},null===(t=e.styles)||void 0===t?void 0:t.a)},to:(0,o.A)("/"+s+"/"+n+"/"+e.slug)},e.name))))}}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-2022-08-12-rest-api-testing-index-mdx-e83bbfb3a967e00afbaa.js.map